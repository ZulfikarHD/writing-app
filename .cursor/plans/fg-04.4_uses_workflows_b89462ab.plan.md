---
name: FG-04.4 Uses Workflows
overview: Implement the "Uses & Workflows" feature group for Workshop Chat, enabling brainstorming tools, plan integration, and quick prompts within the chat interface to enhance writer productivity.
todos:
  - id: brainstorming-panel
    content: Create BrainstormingPanel.vue with categorized prompt templates (Character, Plot, Setting, World)
    status: completed
  - id: prompt-execution-wire
    content: Wire PromptSelector in ChatHeader to ChatPanel prompt execution flow with PromptExecutionWrapper
    status: completed
  - id: outline-context
    content: Add outline/plan context type to ContextSelector with chapter/act selection UI
    status: completed
  - id: quick-prompts-access
    content: Add quick prompts button near chat input for fast access to recent/favorite prompts
    status: completed
  - id: brainstorming-seeder
    content: Create database seeder for default brainstorming system prompts
    status: completed
---

# FG-04.4: Uses & Workflows Implementation Strategy

## PHASE 1: Feature Understanding

### What This Feature Is About

Based on [Novelcrafter's Chat documentation](https://www.novelcrafter.com/help/categories/chat#section-docs), the "Uses for Chat" feature enables writers to utilize the chat interface for various creative workflows:

- Brainstorming characters, plot, settings
- Using quick prompts to kickstart conversations  
- Integrating with story plans/outlines for context-aware discussions
- Quick access to saved prompts within the chat interface

### Data Being Created/Managed

- **Brainstorming templates**: Pre-defined prompt templates for common brainstorming tasks
- **Quick prompts**: Shortcut prompts accessible from chat
- **Plan context**: Integration with novel outline/plan as chat context

### Primary User Goal

Writers want to quickly generate ideas and get AI assistance for specific writing tasks without leaving the chat interface.

---

## PHASE 2: Cross-Frontend Impact Mapping

| Feature | Owner (Who Creates) | Consumer (Who Views) | Data Flow |

|---------|---------------------|---------------------|-----------|

| F-04.4.1 Brainstorming Tools | User via ChatPanel | User in Chat UI | Click prompt -> Insert to chat -> Send |

| F-04.4.2 Using Chat with Plan | User via Context Selector | User in Chat | Select outline -> Add as context -> AI aware |

| F-04.4.3 Quick Prompts in Chat | User via Prompts page | User in Chat Header/Input | Select saved prompt -> Execute in chat |

---

## PHASE 3: Missing Implementation Detection

### F-04.4.1: Brainstorming Tools

**Owner Side (Data Creation):**

- [x] Quick prompts already exist in `ChatWindow.vue` (lines 79-84) - BASIC implementation
- [ ] Category-based brainstorming prompts (Character, Plot, Setting)
- [ ] Custom quick prompts per user
- [ ] Quick prompt templates management

**Consumer Side (Data Display):**

- [x] Quick prompts shown in empty state - BASIC
- [ ] Brainstorming panel/drawer in chat
- [ ] Category tabs for brainstorming prompts
- [ ] "What if..." / "Help me with..." prompt builders
- [ ] Mobile-responsive brainstorming UI

### F-04.4.2: Using Chat with Plan

**Owner Side (Data Creation):**

- [x] Context system exists (`useChatContext.ts`)
- [ ] Outline/Plan as context type
- [ ] Chapter/Act specific context selection
- [ ] Scene summary generation via chat

**Consumer Side (Data Display):**

- [x] Context selector in `ChatInput.vue`
- [ ] "Plan" context type in selector UI
- [ ] Outline preview in context
- [ ] Plan-aware AI responses

### F-04.4.3: Quick Prompts in Chat

**Owner Side (Data Creation):**

- [x] Prompts system fully implemented (EPIC-05)
- [x] Chat-type prompts exist in database
- [x] `PromptSelector.vue` for selecting prompts

**Consumer Side (Data Display):**

- [x] `PromptSelector` in `ChatHeader.vue` - BASIC
- [ ] Prompt execution integration with chat
- [ ] Input form for prompts with inputs
- [ ] Send prompt output directly to chat
- [ ] Quick access prompts panel near input

---

## PHASE 4: Gap Analysis

### Critical Gaps Found:

1. **Brainstorming UI Missing**: The existing quick prompts in `ChatWindow.vue` are just 3 hardcoded strings. Need a proper brainstorming panel with categorized prompts.

2. **Plan/Outline Context Type Not Implemented**: The context system supports `scene`, `codex`, `summary`, `outline`, `custom` but `outline` type needs UI integration with Plan data.

3. **Prompt Execution Not Wired to Chat**: `PromptSelector` exists in header but selecting a prompt doesn't do anything - no execution flow to chat.

4. **No Prompt Quick Access**: No way to quickly access favorite/recent prompts from the input area.

---

## PHASE 5: Implementation Sequencing

### P0 (Critical) - Core Functionality

1. Wire `PromptSelector` to chat execution flow
2. Create `BrainstormingPanel.vue` component
3. Add outline context type to `ContextSelector`

### P1 (Important) - Enhanced UX

4. Add prompt execution with inputs in chat
5. Create brainstorming prompt categories
6. Plan-specific context selection (chapter/act)

### P2 (Enhancement) - Polish

7. Custom quick prompts per user
8. Favorite prompts quick access
9. Brainstorming history/suggestions

### Dependency Graph

```
PromptSelector integration (P0)
    └── Prompt Execution in Chat (P1)
            └── Quick prompts panel (P2)

BrainstormingPanel (P0)
    └── Category prompts (P1)
        └── Custom prompts (P2)

Outline Context Type (P0)
    └── Chapter/Act selection (P1)
```

---

## PHASE 6: Detailed Recommendations

### Files to Create

- `resources/js/components/chat/BrainstormingPanel.vue` - Categorized brainstorming prompts panel
- `resources/js/components/chat/QuickPromptsDrawer.vue` - Quick access to saved chat prompts
- `database/seeders/BrainstormingPromptsSeeder.php` - Default brainstorming prompts

### Files to Modify

**[resources/js/components/workspace/ChatPanel.vue](resources/js/components/workspace/ChatPanel.vue)**

- Add prompt execution handling when prompt selected from header
- Wire `PromptExecutionWrapper` for prompts with inputs
- Add brainstorming panel toggle

**[resources/js/components/chat/ChatHeader.vue](resources/js/components/chat/ChatHeader.vue)**

- Emit event when prompt selected (not just update v-model)
- Add brainstorming toggle button

**[resources/js/components/chat/ChatWindow.vue](resources/js/components/chat/ChatWindow.vue)**

- Replace hardcoded quick prompts with categorized system
- Add "View all prompts" link

**[resources/js/components/chat/ContextSelector.vue](resources/js/components/chat/ContextSelector.vue)**

- Add "Outline" section for plan context
- Support chapter/act selection

**[resources/js/components/chat/ChatInput.vue](resources/js/components/chat/ChatInput.vue)**

- Add quick prompts button near send
- Show recent/favorite prompts

**Backend: `app/Services/Chat/ContextBuilder.php`**

- Add outline context building from Plan data

---

## PHASE 7: Example User Journeys

### Journey 1: Using Brainstorming Tools

**Owner Journey:**

1. User opens chat panel in workspace
2. User sees empty chat with "Start brainstorming" section
3. User clicks "Character Ideas" category
4. User sees prompt options: "Generate a character backstory", "What motivates this character?", etc.
5. User clicks a prompt -> it's inserted into chat input
6. User sends message -> AI responds with brainstorming output

**Consumer Journey:**

1. User navigates to workspace -> chat panel
2. User sees categorized brainstorming buttons (Character, Plot, Setting, World)
3. User clicks "Plot" -> sees sub-options like "Plot twist ideas", "Conflict escalation"
4. User selects option -> prompt appears in input
5. User can edit before sending
6. AI responds with creative suggestions

### Journey 2: Using Chat with Plan

**Owner Journey:**

1. User has an outline/plan with chapters and acts
2. User opens chat panel
3. User clicks context selector (+)
4. User sees "Outline" section with "Add full outline" and chapter list
5. User adds "Chapter 3" as context
6. User asks "How can I improve the pacing here?"
7. AI responds with context-aware suggestions

**Consumer Journey:**

1. User opens chat with existing outline context
2. User sees context badge showing "Chapter 3 outline"
3. User clicks to preview context
4. User sees chapter summary and scenes
5. User can toggle context on/off
6. Chat AI references the outline in responses

### Journey 3: Quick Prompts in Chat

**Owner Journey:**

1. User has created custom chat prompts in Prompts library
2. User opens chat panel
3. User clicks prompt selector in header
4. User browses and selects "My Character Interview" prompt
5. Prompt has inputs: "Character name", "Topic"
6. Input form appears -> user fills in values
7. Resolved prompt text appears in chat input
8. User sends -> AI responds as if interviewing the character

**Consumer Journey:**

1. User is mid-conversation in chat
2. User wants to use a saved prompt quickly
3. User clicks prompt icon near send button
4. Dropdown shows recent/favorite prompts
5. User selects prompt -> executes immediately
6. AI responds according to prompt instructions

---

## Key Implementation Notes

### Existing Code to Leverage

- `usePromptExecution.ts` - Already handles prompt input forms
- `PromptExecutionWrapper.vue` - Ready to use for prompt execution
- `useChatContext.ts` - Context management hooks
- `ContextSelector.vue` - UI for adding context items

### Database Considerations

- Brainstorming prompts can be seeded as system prompts (`is_system: true`)
- Outline context uses existing `chat_context_items.context_type = 'outline'`
- No new tables needed

### Mobile UX Considerations

- Brainstorming panel should be a slide-up drawer on mobile
- Quick prompts dropdown should be bottom-anchored
- Touch-friendly tap targets for prompt selection
